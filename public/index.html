<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Speech-to-Text Monitor</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Speech-to-Text Monitor</h1>
      <div class="status">
        <span>Status:</span>
        <div class="status-indicator status-idle" id="statusIndicator"></div>
        <span id="statusText">Idle</span>
      </div>
    </div>

    <div class="controls">
      <button id="toggleHotkeys">Disable Hotkeys</button>
      <button id="clearHistory">Clear History</button>
      <button onclick="location.reload()">Refresh</button>
    </div>

    <div class="config-section">
      <h2>Configuration</h2>
      
      <div class="config-item">
        <label>Whisper Mode:</label>
        <div class="radio-group">
          <label class="radio-label">
            <input type="radio" name="whisperMode" value="api" id="modeApi">
            <span>OpenAI API (Cloud)</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="whisperMode" value="local" id="modeLocal">
            <span>Local (Offline)</span>
          </label>
        </div>
        <small>Choose between cloud API (requires key & internet) or local processing (no costs)</small>
      </div>

      <div class="config-item" id="apiKeySection">
        <label for="apiKey">OpenAI API Key:</label>
        <div class="api-key-input">
          <input type="password" id="apiKey" placeholder="sk-...">
          <button id="saveApiKey">Save</button>
          <span id="apiKeyStatus"></span>
        </div>
        <small>Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI</a></small>
      </div>

      <div class="config-item" id="modelSection" style="display: none;">
        <div id="localWarning" class="warning-box" style="display: none;">
          <strong>âš  Warning:</strong>
          <p class="warning-message">Local Whisper requires native compilation which is not yet set up. Please see README for setup instructions or use API mode.</p>
        </div>
        
        <label for="whisperModel">Local Model Size:</label>
        <div class="select-group">
          <select id="whisperModel">
            <option value="tiny">Tiny (~75MB, fastest)</option>
            <option value="base">Base (~140MB, balanced)</option>
            <option value="small">Small (~460MB, accurate)</option>
            <option value="medium">Medium (~1.5GB, very accurate)</option>
            <option value="large">Large (~3GB, most accurate)</option>
          </select>
          <button id="saveModel">Save</button>
        </div>
        <small>Larger models are more accurate but slower. Model will download on first use.</small>
      </div>

      <div class="config-item">
        <label class="checkbox-label">
          <input type="checkbox" id="audioFeedbackEnabled">
          <span>Enable Audio Feedback</span>
        </label>
        <small>Play sounds when recording starts and stops</small>
      </div>

      <div class="config-item">
        <label class="checkbox-label">
          <input type="checkbox" id="autoPasteEnabled">
          <span>Auto-Paste Transcribed Text</span>
        </label>
        <small>Automatically paste text into active window. When disabled, text is copied to clipboard with a notification.</small>
      </div>

      <div class="config-item">
        <label for="audioDevice">Audio Input Device:</label>
        <div class="select-group">
          <select id="audioDevice">
            <option value="-1">Default Device</option>
          </select>
          <button id="saveDevice">Save</button>
        </div>
        <small>Select which microphone to use for recording</small>
      </div>
    </div>

    <div class="transcriptions" id="transcriptions">
      <div class="empty-state">No transcriptions yet</div>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
